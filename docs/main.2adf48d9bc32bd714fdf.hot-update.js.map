{"version":3,"file":"main.2adf48d9bc32bd714fdf.hot-update.js","mappings":"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","sources":["webpack://web-app/./src/index.js","webpack://web-app/webpack/runtime/getFullHash"],"sourcesContent":["import Matter, { Body, World } from \"matter-js\";\r\nimport \"./index.scss\";\r\n\r\nconst windowCenter = window.innerWidth / 2;\r\n\r\n// module aliases\r\nconst Engine = Matter.Engine,\r\n  Render = Matter.Render,\r\n  Runner = Matter.Runner,\r\n  Bodies = Matter.Bodies,\r\n  Events = Matter.Events,\r\n  Mouse = Matter.Mouse,\r\n  Composite = Matter.Composite,\r\n  Composites = Matter.Composites,\r\n  MouseConstraint = Matter.MouseConstraint;\r\n\r\n// create an engine\r\nconst engine = Engine.create();\r\nconst world = engine.world;\r\n\r\n// create a renderer\r\nconst render = Render.create({\r\n  element: document.body,\r\n  engine: engine,\r\n  options: {\r\n    width: window.innerWidth,\r\n    height: window.innerHeight - 10,\r\n    wireframes: false,\r\n  },\r\n});\r\n\r\nworld.gravity.y = 1.6;\r\n\r\n// run the renderer\r\nRender.run(render);\r\n\r\nconst runner = Runner.create();\r\nRunner.run(runner, engine);\r\n\r\nconst polygons = [];\r\nconst circles = [];\r\nconst category1 = 0x0001;\r\nconst category2 = 0x0002;\r\nconst gapX = 40;\r\nconst gapY = gapX * 1.125;\r\nconst plinkos = 13;\r\nconst ballWidth = gapX / 2.678;\r\nconst ways = plinkos - 2;\r\nconst polygonsStartY = window.innerHeight - 100;\r\nconst plinkosStartY = polygonsStartY - 30 - plinkos * gapY;\r\n\r\n// plinkos\r\nfor (let i = 0; i < plinkos; i++) {\r\n  if (i > 1) {\r\n    const itemY = i * gapY + plinkosStartY;\r\n    const startCountFromX = -i / 2;\r\n    for (let j = 0; j <= i; j++) {\r\n      const itemX = (startCountFromX + j) * gapX + windowCenter;\r\n      const item = Bodies.circle(itemX, itemY, 5, {\r\n        isStatic: true,\r\n        friction: 1,\r\n        restitution: 1,\r\n        density: 1,\r\n        collisionFilter: {\r\n          category: category1,\r\n        },\r\n        rowIndex: i,\r\n        label: \"plinko\",\r\n        render: {\r\n          fillStyle: \"white\",\r\n          lineWidth: 0,\r\n        },\r\n      });\r\n\r\n      circles.push(item);\r\n    }\r\n  }\r\n}\r\n\r\n// polygons\r\nfor (let i = 0; i < plinkos; i++) {\r\n  const itemX = i * gapX - (gapX * plinkos) / 2 + gapX / 2 + windowCenter;\r\n\r\n  const item = Bodies.rectangle(itemX, polygonsStartY, 70, 3, {\r\n    isStatic: true,\r\n    angle: Math.PI * 0.5,\r\n  });\r\n\r\n  polygons.push(item);\r\n}\r\n\r\npolygons.push(\r\n  Bodies.rectangle(windowCenter, window.innerHeight, window.innerWidth, 1, {\r\n    isStatic: true,\r\n    isSensor: true,\r\n    label: \"endLine\",\r\n  })\r\n);\r\n\r\nComposite.add(world, circles);\r\nComposite.add(world, polygons);\r\n// Composite.add(world, stack);\r\n\r\nconst mouse = Mouse.create(render.canvas);\r\nconst mouseConstraint = MouseConstraint.create(engine, {\r\n  mouse: mouse,\r\n  constraint: {\r\n    stiffness: 0.2,\r\n  },\r\n});\r\n\r\n// setInterval(() => {\r\n//   handlePlink();\r\n// }, 100);\r\n\r\nconst handlePlink = () => {\r\n  let resWays = [];\r\n\r\n  let result = 10;\r\n\r\n  for (let i = 0; i < ways; i++) {\r\n    resWays.push(i < result ? \"+\" : \"-\");\r\n  }\r\n\r\n  Composite.add(\r\n    world,\r\n    Bodies.circle(windowCenter, plinkosStartY + 50, ballWidth, {\r\n      isStatic: false,\r\n      type: \"body\",\r\n      friction: 1,\r\n      restitution: 0.8,\r\n      density: 0.1,\r\n      label: \"ball\",\r\n      resWays: shuffle(resWays),\r\n      collisionFilter: {\r\n        mask: category1,\r\n        category: category2,\r\n      },\r\n      render: {\r\n        fillStyle: \"#13bccf\",\r\n        lineWidth: 0,\r\n      },\r\n    })\r\n  );\r\n};\r\n\r\nEvents.on(mouseConstraint, \"mousedown\", handlePlink);\r\n\r\nEvents.on(engine, \"collisionStart\", function (event) {\r\n  const pairs = event.pairs;\r\n  const { bodyA } = pairs[0];\r\n\r\n  bodyA.render.fillStyle = \"#13bccf\";\r\n});\r\n\r\nEvents.on(engine, \"collisionActive\", function (event) {\r\n  const pairs = event.pairs;\r\n  const { bodyA } = pairs[0];\r\n\r\n  bodyA.render.fillStyle = \"#13bccf\";\r\n});\r\n\r\nEvents.on(engine, \"collisionEnd\", function (event) {\r\n  const pairs = event.pairs;\r\n\r\n  for (let i = 0; i < pairs.length; i++) {\r\n    const pair = pairs[i];\r\n    const bodies = { bodyA: { ...pair.bodyA }, bodyB: { ...pair.bodyB } };\r\n\r\n    let ballBody, plinkoBody;\r\n\r\n    for (let [key, value] of Object.entries(bodies)) {\r\n      switch (value.label) {\r\n        case \"ball\":\r\n          ballBody = { ...value };\r\n          break;\r\n        case \"plinko\":\r\n          plinkoBody = { ...value };\r\n          break;\r\n        case \"endLine\":\r\n          World.remove(world, pair[key === \"bodyA\" ? \"bodyB\" : \"bodyA\"]);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    if (ballBody && plinkoBody) {\r\n      const angleAbsolute =\r\n        plinkoBody.position.y -\r\n        (ballBody.position.y + ballBody.circleRadius) -\r\n        4;\r\n\r\n      if (angleAbsolute >= 0) {\r\n        const resWays = ballBody.resWays;\r\n        const plinkoRow = plinkoBody.rowIndex;\r\n        if (resWays) {\r\n          Body.setVelocity(ballBody, {\r\n            x: resWays[plinkoRow - 2] === \"+\" ? 1 : -1,\r\n            y: -2.8,\r\n          });\r\n        }\r\n      }\r\n      plinkoBody.render.fillStyle = \"white\";\r\n    }\r\n  }\r\n});\r\n\r\n// Render.lookAt(render, Composite.allBodies(world));\r\n\r\nComposite.add(world, mouseConstraint);\r\n\r\nrender.mouse = mouse;\r\n\r\nfunction shuffle(array) {\r\n  let currentIndex = array.length,\r\n    randomIndex;\r\n\r\n  // While there remain elements to shuffle.\r\n  while (currentIndex != 0) {\r\n    // Pick a remaining element.\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex--;\r\n\r\n    // And swap it with the current element.\r\n    [array[currentIndex], array[randomIndex]] = [\r\n      array[randomIndex],\r\n      array[currentIndex],\r\n    ];\r\n  }\r\n\r\n  return array;\r\n}\r\n","__webpack_require__.h = () => (\"2c90841853af910226e3\")"],"names":["Matter","Body","World","windowCenter","window","innerWidth","Engine","Render","Runner","Bodies","Events","Mouse","Composite","Composites","MouseConstraint","engine","create","world","render","element","document","body","options","width","height","innerHeight","wireframes","gravity","y","run","runner","polygons","circles","category1","category2","gapX","gapY","plinkos","ballWidth","ways","polygonsStartY","plinkosStartY","i","itemY","startCountFromX","j","itemX","item","circle","isStatic","friction","restitution","density","collisionFilter","category","rowIndex","label","fillStyle","lineWidth","push","rectangle","angle","Math","PI","isSensor","add","mouse","canvas","mouseConstraint","constraint","stiffness","handlePlink","resWays","result","type","shuffle","mask","on","event","pairs","bodyA","length","pair","bodies","bodyB","ballBody","plinkoBody","Object","entries","key","value","remove","angleAbsolute","position","circleRadius","plinkoRow","setVelocity","x","array","currentIndex","randomIndex","floor","random"],"sourceRoot":""}