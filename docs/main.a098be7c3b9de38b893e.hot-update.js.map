{"version":3,"file":"main.a098be7c3b9de38b893e.hot-update.js","mappings":"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","sources":["webpack://web-app/./src/core/EventsListeners.js","webpack://web-app/webpack/runtime/getFullHash"],"sourcesContent":["import AppInit from \"./AppInit\";\r\nimport TWEEN from \"@tweenjs/tween.js\";\r\nclass EventsListeners extends AppInit {\r\n  constructor() {\r\n    super();\r\n    this.app.ticker.add(() => {\r\n      TWEEN.update();\r\n    });\r\n  }\r\n  init() {\r\n    const {\r\n      Events,\r\n      World,\r\n      world,\r\n      engine,\r\n      app,\r\n      getBodyGraphic,\r\n      textResultAnimate,\r\n      handleCollisionBall,\r\n    } = this;\r\n\r\n    Events.on(engine, \"collisionStart\", function (event) {\r\n      const pairs = event.pairs;\r\n\r\n      for (let i = 0; i < pairs.length; i++) {\r\n        const pair = pairs[i];\r\n        const bodies = { bodyA: { ...pair.bodyA }, bodyB: { ...pair.bodyB } };\r\n\r\n        for (let [key, value] of Object.entries(bodies)) {\r\n          if (value.label === \"plinko\") {\r\n            value.render.fillStyle = \"red\";\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    Events.on(engine, \"collisionActive\", function (event) {\r\n      const pairs = event.pairs;\r\n      for (let i = 0; i < pairs.length; i++) {\r\n        const pair = pairs[i];\r\n        const bodies = { bodyA: { ...pair.bodyA }, bodyB: { ...pair.bodyB } };\r\n\r\n        for (let [key, value] of Object.entries(bodies)) {\r\n          if (value.label === \"plinko\") {\r\n            value.render.fillStyle = \"red\";\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    Events.on(engine, \"collisionEnd\", function (event) {\r\n      const pairs = event.pairs;\r\n\r\n      for (let i = 0; i < pairs.length; i++) {\r\n        const pair = pairs[i];\r\n        const bodies = { bodyA: { ...pair.bodyA }, bodyB: { ...pair.bodyB } };\r\n\r\n        let ballBody, plinkoBody;\r\n\r\n        for (let [key, value] of Object.entries(bodies)) {\r\n          const secondValue = pair[key === \"bodyA\" ? \"bodyB\" : \"bodyA\"];\r\n          switch (value.label) {\r\n            case \"ball\":\r\n              ballBody = { ...value };\r\n              break;\r\n            case \"plinko\":\r\n              plinkoBody = { ...value };\r\n              break;\r\n            case \"endLine\": {\r\n              const { body, graphic } = getBodyGraphic(\r\n                secondValue,\r\n                \"graphicKey\"\r\n              );\r\n\r\n              app.stage.removeChild(graphic);\r\n              World.remove(world, body);\r\n              break;\r\n            }\r\n            case \"separate\":\r\n              const { graphic } = getBodyGraphic(value, \"id\");\r\n              const { isActiveAnimation } = graphic;\r\n              if (!isActiveAnimation) {\r\n                textResultAnimate(graphic);\r\n              }\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n\r\n        if (ballBody && plinkoBody) {\r\n          handleCollisionBall(ballBody, plinkoBody);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getBodyGraphic = (body, key) => {\r\n    const { app } = this;\r\n    const bodyValue = body[key];\r\n    const graphic = app.stage.children.find((item) => item[key] === bodyValue);\r\n\r\n    return { body, graphic };\r\n  };\r\n\r\n  handleCollisionBall = (ballBody, plinkoBody) => {\r\n    const { Body } = this;\r\n\r\n    const angleAbsolute =\r\n      plinkoBody.position.y - (ballBody.position.y + ballBody.circleRadius) - 4;\r\n\r\n    if (angleAbsolute >= 0) {\r\n      const resWays = ballBody.resWays;\r\n      const plinkoRow = plinkoBody.rowIndex;\r\n      if (resWays) {\r\n        Body.setVelocity(ballBody, {\r\n          x: resWays[plinkoRow - 2] === \"+\" ? 1 : -1,\r\n          y: -2.8,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  textResultAnimate = (graphic) => {\r\n    graphic.isActiveAnimation = true;\r\n    const yPos = graphic.position.y;\r\n    const tween = new TWEEN.Tween({\r\n      x: graphic.position.x,\r\n      y: yPos,\r\n    });\r\n    tween.easing(TWEEN.Easing.Bounce.Out);\r\n    tween.to({ y: [yPos + 10, yPos] }, 500).start();\r\n    tween.onUpdate(function ({ x, y }) {\r\n      graphic.position.y = y;\r\n    });\r\n    tween.onComplete(() => {\r\n      graphic.isActiveAnimation = false;\r\n    });\r\n  };\r\n}\r\n\r\nexport default EventsListeners;\r\n","__webpack_require__.h = () => (\"837ed3b7b186a3b60bc1\")"],"names":["AppInit","TWEEN","EventsListeners","body","key","app","bodyValue","graphic","stage","children","find","item","ballBody","plinkoBody","Body","angleAbsolute","position","y","circleRadius","resWays","plinkoRow","rowIndex","setVelocity","x","isActiveAnimation","yPos","tween","Tween","easing","Easing","Bounce","Out","to","start","onUpdate","onComplete","ticker","add","update","Events","World","world","engine","getBodyGraphic","textResultAnimate","handleCollisionBall","on","event","pairs","i","length","pair","bodies","bodyA","bodyB","Object","entries","value","label","render","fillStyle","secondValue","removeChild","remove"],"sourceRoot":""}